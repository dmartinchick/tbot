from datetime import datetime
from utils.db_api.sqlighter import SQL


def parse_line(text):
    name = text[0]
    dt = text[1].strftime('%d.%m %H:%M')
    answ = f"{name} \n–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ {dt}"
    return answ    


def card_what_now():
    rq = SQL.what_now()
    answ = '–°–µ–π—á–∞—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç üëá\n\n'
    for line in rq:
        answ = answ + parse_line(line) + "\n\n"
    return answ


def full_schedule():
    answ = """
            ---18 –∏—é–Ω—è---\n13.00-15.30 ‚Äì –¢–µ—Ö–Ω–∏–∫–∞ –ø–µ—à–µ—Ö–æ–¥–Ω–æ–≥–æ —Ç—É—Ä–∏–∑–º–∞\n
‚ùï 06.00-15.30 ‚Äì –∑–∞–µ–∑–¥ –∫–æ–º–∞–Ω–¥, —Ä–∞–∑–±–∏–≤–∫–∞ –ª–∞–≥–µ—Ä—è\n
‚ùï 15.30-16.00 ‚Äì –æ–±–µ–¥\n
‚ùï 16.00-17.00 ‚Äì –∑–∞—Å–µ–¥–∞–Ω–∏–µ –æ—Ä–≥–∫–æ–º–∏—Ç–µ—Ç–∞, —Å—É–¥–µ–π—Å–∫–æ–π –∫–æ–ª–ª–µ–≥–∏–∏, —Å–æ–≤–µ—â–∞–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–Ω–æ–≤ –∫–æ–º–∞–Ω–¥, –∂–µ—Ä–µ–±—å–µ–≤–∫–∞\n
‚ùï 17.15-18.00 ‚Äì –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥, —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –§–µ—Å—Ç–∏–≤–∞–ª—è\n
‚ùï 18.00-19.30 ‚Äì –õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫\n
‚ùï 19.30-20.30 ‚Äì –ë–æ—Ä—å–±–∞ –∑–∞ –º—É–∂–∏–∫–∞\n
‚ùï 19.30-21.30 ‚Äì –í–æ–ª–µ–π–±–æn\n
‚ùï 20.30-21.30 ‚Äì —É–∂–∏–Ω\n
‚ùï 21.30-23.30 ‚Äì –ë–æ–¥–∏-–∞—Ä—Ç\n
‚ùï 22.00-00.00 ‚Äì –ù–æ—á–Ω–æ–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n
‚ùï 23.30-02.30 ‚Äì –¥–∏—Å–∫–æ—Ç–µ–∫–∞\n\n
---19 –∏—é–Ω—è---\n
‚ùï 07.30-08.00 ‚Äì –ø–æ–¥—ä–µ–º, –∑–∞–≤—Ç—Ä–∞–∫\n
‚ùï 08.15-08.30 ‚Äì –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥, –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è\n
‚ùï 08.30-13.00 ‚Äì –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç\n
‚ùï 08.30-14.00 ‚Äì –í–æ–ª–µ–π–±–æ–ª\n
‚ùï 13.30-14.00 ‚Äì –æ–±–µ–¥\n
‚ùï 14.00-15.30 ‚Äì –ú–æ–ª–æ—Ç –¢–æ—Ä–∞\n
‚ùï 15.00-20.00 ‚Äì –í—ã–±–∏–≤–∞–ª—ã\n
‚ùï 16.00-18.00 ‚Äì –ë–∏–≤—É–∞–∫\n
‚ùï 18.00-19.00 ‚Äì –î—Ä–∞–Ω–∏–∫-fest\n
‚ùï 19.00-21.00 ‚Äì —É–∂–∏–Ω\n
‚ùï 21.00-23.30 ‚Äì –¢–≤–æ—Ä—á–µ—Å–∫–∏–π –∫–æ–Ω–∫—É—Ä—Å ¬´–í –ø–æ–≥–æ–Ω–µ –∑–∞ –û—Å–∫–∞—Ä–æ–º¬ª\n
‚ùï 23.30-02.30 ‚Äì –¥–∏—Å–∫–æ—Ç–µ–∫–∞\n\n
---20 –∏—é–Ω—è----\n
‚ùï 08.00-08.30 ‚Äì –ø–æ–¥—ä–µ–º, –∑–∞–≤—Ç—Ä–∞–∫\n
‚ùï 09.00-09.15 ‚Äì –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥, –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–Ω—è\n
‚ùï 09.15-11.00 ‚Äì –í—ã–±–∏–≤–∞–ª—ã\n
‚ùï 09.15-11.00 ‚Äì –í–µ–ª–æ—Ç—É—Ä–∏–∑–º\n
‚ùï 11.00-12.00 ‚Äì –ü–µ—Ä–µ—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫–∞–Ω–∞—Ç–∞\n
‚ùï 12.00-13.00 ‚Äì –æ–±–µ–¥\n
‚ùï 13.00-14.30 ‚Äì –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤, –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ª–µ—Ç–∞\n
‚ùï 14.30-15.30 ‚Äì –æ—Ç—ä–µ–∑–¥
–í –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤–æ–∑–º–æ–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è"""
    return answ